{"ast":null,"code":"function n(n) {\n  return n && \"object\" == typeof n && \"default\" in n ? n.default : n;\n}\n\nvar t = require(\"react\"),\n    r = n(t),\n    e = require(\"redux\"),\n    o = n(require(\"redux-thunk\")),\n    u = require(\"immer\"),\n    i = n(require(\"memoizerific\")),\n    c = require(\"is-plain-object\"),\n    f = require(\"use-memo-one\"),\n    a = t.createContext(),\n    s = \"undefined\" != typeof window ? t.useLayoutEffect : t.useEffect;\n\nfunction v(n) {\n  return function (r, e) {\n    var o = t.useContext(n),\n        u = t.useRef(r),\n        i = t.useRef(),\n        c = t.useRef(!0),\n        f = t.useRef(),\n        a = t.useReducer(function (n) {\n      return n + 1;\n    }, 0)[1];\n    if (f.current || u.current !== r || void 0 === i.current) try {\n      i.current = r(o.getState());\n    } catch (n) {\n      if (\"development\" === process.env.NODE_ENV) {\n        var v = \"An error occurred trying to map state in a useStoreState hook: \" + n.message + \".\";\n        throw f.current && (v += \"\\nThis error may be related to the following error:\\n\" + f.current.stack + \"\\n\\nOriginal stack trace:\"), new Error(v);\n      }\n\n      throw f.current || n;\n    }\n    return s(function () {\n      u.current = r, f.current = void 0;\n    }), s(function () {\n      var n = function () {\n        try {\n          var n = u.current(o.getState());\n          if (\"function\" == typeof e ? e(i.current, n) : i.current === n) return;\n          i.current = n;\n        } catch (n) {\n          f.current = n;\n        }\n\n        c.current && a({});\n      },\n          t = o.subscribe(n);\n\n      return n(), function () {\n        c.current = !1, t();\n      };\n    }, []), i.current;\n  };\n}\n\nvar l = v(a);\n\nfunction d(n) {\n  return function (r) {\n    return r(t.useContext(n).getActions());\n  };\n}\n\nvar p = d(a);\n\nfunction y(n) {\n  return function () {\n    return t.useContext(n).dispatch;\n  };\n}\n\nvar m = y(a);\n\nfunction h() {\n  return t.useContext(a);\n}\n\nfunction S(n) {\n  return function () {\n    var r = t.useContext(n),\n        e = t.useState(!1),\n        o = e[0],\n        u = e[1];\n    return t.useEffect(function () {\n      r.persist.resolveRehydration().then(function () {\n        return u(!0);\n      });\n    }, []), o;\n  };\n}\n\nvar g = S(a);\n\nfunction w() {\n  return (w = Object.assign || function (n) {\n    for (var t = 1; t < arguments.length; t++) {\n      var r = arguments[t];\n\n      for (var e in r) Object.prototype.hasOwnProperty.call(r, e) && (n[e] = r[e]);\n    }\n\n    return n;\n  }).apply(this, arguments);\n}\n\nvar b = function (n) {\n  var t;\n  return (t = {}).$ep_a = !0, t.fn = n, t;\n},\n    j = [function (n) {\n  return n;\n}],\n    P = new u.Immer({\n  useProxies: !0,\n  autoFreeze: !1\n}),\n    O = function (n) {\n  return function n(t) {\n    var r = Object.keys(t).reduce(function (n, r) {\n      return null == Object.getOwnPropertyDescriptor(t, r).get && (n[r] = t[r]), n;\n    }, {});\n    return Object.keys(r).forEach(function (t) {\n      c.isPlainObject(r[t]) && (r[t] = n(r[t]));\n    }), r;\n  }(n);\n},\n    x = function (n) {\n  return null != n && \"object\" == typeof n && \"function\" == typeof n.then;\n};\n\nfunction _(n, t) {\n  return n.reduce(function (n, t) {\n    return c.isPlainObject(n) ? n[t] : void 0;\n  }, t);\n}\n\nvar A = function (n, t, r) {\n  0 !== n.length ? n.reduce(function (t, e, o) {\n    return t[e] = o + 1 === n.length ? r : t[e] || {}, t[e];\n  }, t) : \"object\" == typeof r && (Object.keys(t).forEach(function (n) {\n    delete t[n];\n  }), Object.keys(r).forEach(function (n) {\n    t[n] = r[n];\n  }));\n},\n    k = function (n) {\n  try {\n    var t = [];\n    return Promise.resolve((r = n, new Promise(function (n, e) {\n      var o = r[Symbol.iterator]();\n      !function r(u) {\n        try {\n          var i = o.next();\n          if (i.done) return n(u), Promise.resolve();\n\n          var c = function (n, e) {\n            try {\n              var o = Promise.resolve(Promise.all([u, i.value])).then(function (n) {\n                r(function (n, r) {\n                  try {\n                    return Promise.resolve(r()).then(function (n) {\n                      t.push(n);\n                    });\n                  } catch (n) {\n                    return Promise.reject(n);\n                  }\n                }(0, n[1]));\n              });\n            } catch (n) {\n              return e(n);\n            }\n\n            return o && o.then ? o.then(void 0, e) : o;\n          }(0, function (n) {\n            e(n);\n          });\n\n          return Promise.resolve(c && c.then ? c.then(function () {}) : void 0);\n        } catch (n) {\n          return Promise.reject(n);\n        }\n      }(void 0);\n    }))).then(function () {\n      return t;\n    });\n  } catch (n) {\n    return Promise.reject(n);\n  }\n\n  var r;\n};\n\nfunction I(n, t, r, e) {\n  var o = function (n) {\n    return void 0 === n && (n = !1), function (t, r, e) {\n      if (n) {\n        var o = _(t, r),\n            i = e(o);\n\n        return o !== i ? function n(t, r, e) {\n          if (0 === t.length) return e;\n          var o = w({}, r),\n              u = t[0];\n          return o[u] = 1 === t.length ? e : n(t.slice(1), o[u], e), o;\n        }(t, r, i) : r;\n      }\n\n      if (0 === t.length) {\n        var c = P.createDraft(r),\n            f = e(c);\n        return f ? u.isDraft(f) ? P.finishDraft(f) : f : P.finishDraft(c);\n      }\n\n      var a = t.slice(0, t.length - 1),\n          s = P.createDraft(r),\n          v = _(a, r),\n          l = e(_(t, s));\n\n      return l && (v[t[t.length - 1]] = l), P.finishDraft(s);\n    };\n  }(n);\n\n  return function (n, u) {\n    var i = function (n, r) {\n      var e = t[r.type];\n      return e ? function (n, t, r, e) {\n        return o(e, n, function (n) {\n          return r(n, t.payload);\n        });\n      }(n, r, e, e.definition.meta.parent) : n;\n    }(n, u),\n        c = r.length > 0 ? function (n, t) {\n      return r.reduce(function (n, r) {\n        var e = r.key,\n            u = r.reducer;\n        return o(r.parentPath, n, function (n) {\n          return n[e] = u(n[e], t), n;\n        });\n      }, n);\n    }(i, u) : i;\n\n    return n !== c && e.forEach(function (n) {\n      var t = n.bindComputedProperty,\n          r = _(n.parentPath, c);\n\n      null != r && t(r, c);\n    }), c;\n  };\n}\n\nvar R = {\n  getItem: function () {},\n  setItem: function () {},\n  removeItem: function () {}\n},\n    T = function (n) {\n  var t;\n  return function () {\n    if (!t) {\n      try {\n        \"undefined\" != typeof window && void 0 !== window[n] && (t = window[n]);\n      } catch (n) {}\n\n      t || (t = R);\n    }\n\n    return t;\n  };\n},\n    C = T(\"localStorage\"),\n    q = T(\"sessionStorage\");\n\nfunction D(n, t) {\n  void 0 === t && (t = []), null == n && (n = q()), \"string\" == typeof n && (\"localStorage\" === n ? n = C() : \"sessionStorage\" === n ? n = q() : (\"development\" === process.env.NODE_ENV && console.warn(\"Invalid storage provider specified for Easy Peasy persist: \" + n + '\\nValid values include \"localStorage\", \"sessionStorage\" or a custom storage engine.'), n = R));\n\n  var r = [].concat(t).reverse(),\n      e = function (t) {\n    var e = n === C() || n === q() ? JSON.parse(t).data : t;\n    return r.length > 0 && null != e && \"object\" == typeof e && Object.keys(e).forEach(function (n) {\n      e[n] = r.reduce(function (t, r) {\n        return r.out(t, n);\n      }, e[n]);\n    }), e;\n  },\n      o = x(n.getItem(\"_\"));\n\n  return {\n    isAsync: o,\n    getItem: function (t) {\n      if (o) return n.getItem(t).then(function (n) {\n        return null != n ? e(n) : void 0;\n      });\n      var r = n.getItem(t);\n      return null != r ? e(r) : void 0;\n    },\n    setItem: function (r, e) {\n      return n.setItem(r, function (r) {\n        return t.length > 0 && null != r && \"object\" == typeof r && Object.keys(r).forEach(function (n) {\n          r[n] = t.reduce(function (t, r) {\n            return r.in(t, n);\n          }, r[n]);\n        }), n === C() || n === q() ? JSON.stringify({\n          data: r\n        }) : r;\n      }(e));\n    },\n    removeItem: function (t) {\n      return n.removeItem(t);\n    }\n  };\n}\n\nfunction M(n, t) {\n  return function () {\n    return 0 === t.internals.t.length ? Promise.resolve() : k(t.internals.t.map(function (t) {\n      var r = t.path,\n          e = t.config;\n      return function () {\n        return Promise.resolve(e.storage.removeItem(n(r)));\n      };\n    }));\n  };\n}\n\nfunction E(n, t, r, e) {\n  return 0 === r.internals.t.length ? Promise.resolve() : k(r.internals.t.map(function (o) {\n    return function () {\n      var u = o.path,\n          i = o.config,\n          f = i.mergeStrategy,\n          a = i.storage;\n      if (e && (u.length < 1 || u[0] !== e)) return Promise.resolve();\n\n      var s = r.internals.o,\n          v = function (n, t) {\n        return null != n && null != t && (typeof n != typeof t || Array.isArray(n) && !Array.isArray(t));\n      },\n          l = function (n) {\n        null != n && function (n, t) {\n          if (\"overwrite\" === f) A(u, n, t);else if (\"mergeShallow\" === f) {\n            var r = _(u, n);\n\n            Object.keys(t).forEach(function (n) {\n              v(r[n], t[n]) || (r[n] = t[n]);\n            });\n          } else \"mergeDeep\" === f && function n(t, r) {\n            Object.keys(r).forEach(function (e) {\n              v(t[e], r[e]) || (c.isPlainObject(r[e]) ? (t[e] = t[e] || {}, n(t[e], r[e])) : t[e] = r[e]);\n            });\n          }(_(u, n), t);\n        }(s, n), t(s);\n      },\n          d = a.getItem(n(u));\n\n      return x(d) ? d.then(l) : Promise.resolve(l(d));\n    };\n  }));\n}\n\nvar N = function (n, t) {\n  console.log(\"An error occurred in a listener for \" + n), console.log(t);\n},\n    z = function (n, t) {\n  return function () {\n    try {\n      var r = t.apply(void 0, [].slice.call(arguments));\n      x(r) && r.catch(function (t) {\n        N(n, t);\n      });\n    } catch (t) {\n      N(n, t);\n    }\n  };\n};\n\nfunction J(n) {\n  return function () {\n    return function (t) {\n      return function (r) {\n        var e = t(r);\n\n        if (r && n.internals.u[r.type] && n.internals.u[r.type].length > 0) {\n          var o = n.internals.i[r.type];\n          n.internals.u[r.type].forEach(function (n) {\n            n({\n              type: o ? o.definition.meta.type : r.type,\n              payload: r.payload,\n              error: r.error,\n              result: r.result\n            });\n          });\n        }\n\n        return e;\n      };\n    };\n  };\n}\n\nfunction F(n) {\n  return function (t) {\n    return function (r) {\n      return function (e) {\n        return n.internals.s.currentState = t.getState(), n.internals.s.isInReducer = !0, r(e);\n      };\n    };\n  };\n}\n\nfunction L(n) {\n  return function (t) {\n    return function (r) {\n      return function (e) {\n        if (0 === n.internals.v.length) return r(e);\n        var o = t.getState(),\n            u = r(e),\n            i = t.getState();\n        return n.internals.v.forEach(function (n) {\n          var t = _(n.meta.parent, o),\n              r = _(n.meta.parent, i);\n\n          if (t !== r) {\n            var u = n.dependencyResolvers.map(function (n) {\n              return n(t);\n            }),\n                c = n.dependencyResolvers.map(function (n) {\n              return n(r);\n            });\n            u.some(function (n, t) {\n              return n !== c[t];\n            }) && n.actionCreator(u, c, e);\n          }\n        }), u;\n      };\n    };\n  };\n}\n\nvar V = function (n) {\n  console.log(n);\n},\n    Y = function (n, t) {\n  console.log(\"An error occurred in a listener for \" + n), console.log(t);\n},\n    $ = function (n, t) {\n  return function () {\n    try {\n      var r = t.apply(void 0, [].slice.call(arguments));\n      x(r) && r.catch(function (t) {\n        Y(n, t);\n      });\n    } catch (t) {\n      Y(n, t);\n    }\n  };\n};\n\nfunction B(n, t) {\n  void 0 === t && (t = {});\n  var r = O(n),\n      u = t.compose,\n      f = t.devTools,\n      a = void 0 === f ? \"production\" !== process.env.NODE_ENV : f,\n      s = t.disableImmer,\n      v = void 0 !== s && s,\n      l = t.enhancers,\n      d = void 0 === l ? [] : l,\n      p = t.initialState,\n      y = void 0 === p ? {} : p,\n      m = t.injections,\n      h = void 0 === m ? {} : m,\n      S = t.middleware,\n      g = void 0 === S ? [] : S,\n      j = t.mockActions,\n      P = void 0 !== j && j,\n      R = t.name,\n      T = void 0 === R ? \"EasyPeasyStore\" : R,\n      C = t.version,\n      q = void 0 === C ? 0 : C,\n      N = t.reducerEnhancer,\n      Y = void 0 === N ? function (n) {\n    return n;\n  } : N;\n  if (\"production\" !== process.env.NODE_ENV && \"object\" != typeof h) throw new Error(\"[easy-peasy] Store injections must be an object\");\n\n  var B = function (n) {\n    return w({}, n, {\n      ePRS: b(function (n, t) {\n        return t;\n      })\n    });\n  },\n      G = {},\n      H = B(r),\n      K = [],\n      Q = function (n) {\n    return \"[\" + T + \"][\" + q + \"]\" + (n.length > 0 ? \"[\" + n.join(\".\") + \"]\" : \"\");\n  },\n      U = function (n, t) {\n    var r,\n        e = Promise.resolve(),\n        o = !1,\n        u = \"undefined\" == typeof window ? function (n) {\n      return n();\n    } : null != window.requestIdleCallback ? window.requestIdleCallback : window.requestAnimationFrame;\n    return {\n      persist: function (i) {\n        if (0 !== t.internals.t.length) {\n          var f = function () {\n            o = !0, e = new Promise(function (e) {\n              u(function () {\n                k(t.internals.t.map(function (t) {\n                  var r = t.path,\n                      e = t.config;\n                  return function () {\n                    var t = e.storage,\n                        o = e.allow,\n                        u = e.deny,\n                        f = function (n, t, r) {\n                      var e = Object.keys(n);\n                      return t.length > 0 && (e = e.reduce(function (n, r) {\n                        return -1 !== t.findIndex(function (n) {\n                          return n === r;\n                        }) ? [].concat(n, [r]) : n;\n                      }, [])), r.length > 0 && (e = e.reduce(function (n, t) {\n                        return -1 !== r.findIndex(function (n) {\n                          return n === t;\n                        }) ? n : [].concat(n, [t]);\n                      }, [])), e;\n                    }(O(_(r, i)), o, u),\n                        a = {};\n\n                    return f.map(function (n) {\n                      var t = _([].concat(r, [n]), i),\n                          e = c.isPlainObject(t) ? O(t) : t;\n\n                      a[n] = e;\n                    }), Promise.resolve(t.setItem(n(r), a));\n                  };\n                })).finally(function () {\n                  if (o = !1, r) {\n                    var n = r;\n                    r = null, n();\n                  } else e();\n                });\n              });\n            });\n          };\n\n          o ? r = f : f();\n        }\n      },\n      clear: M(n, t),\n      flush: function () {\n        try {\n          return r && r(), Promise.resolve(e).then(function () {});\n        } catch (n) {\n          return Promise.reject(n);\n        }\n      }\n    };\n  }(Q, G),\n      W = function (n, t) {\n    return function (r) {\n      var e = r.getState;\n      return function (r) {\n        return function (o) {\n          var u = r(o);\n          return o && \"@action.ePRS\" !== o.type && t.internals.t.length > 0 && n.persist(e()), u;\n        };\n      };\n    };\n  }(U, G),\n      X = function (n) {\n    return G.internals.i[\"@action.ePRS\"](n);\n  },\n      Z = function (n) {\n    void 0 === n && (n = {}), G.internals = function (n) {\n      var t = n.disableImmer,\n          r = n.reducerEnhancer,\n          e = function (n, t, r, e) {\n        var o = t,\n            u = {},\n            f = {},\n            a = {},\n            s = {},\n            v = [],\n            l = [],\n            d = [],\n            p = {},\n            y = {},\n            m = [],\n            h = [],\n            S = {\n          isInReducer: !1,\n          currentState: o\n        };\n        return h = h.sort(function (n, t) {\n          var r = n.path.join(\".\"),\n              e = t.path.join(\".\");\n          return r < e ? -1 : r > e ? 1 : 0;\n        }), function n(y, S) {\n          return Object.keys(y).forEach(function (g) {\n            var b = y[g],\n                j = [].concat(S, [g]),\n                P = {\n              parent: S,\n              path: j,\n              key: g\n            },\n                O = function () {\n              var n = _(S, t);\n\n              A(j, o, n && g in n ? n[g] : b);\n            };\n\n            if (\"$ep_p\" !== g) {\n              if (null != b && \"object\" == typeof b) {\n                if (b.$ep_a || b.$ep_aO) {\n                  var k = w({}, b),\n                      I = k.$ep_a ? \"@action\" : \"@actionOn\";\n                  k.meta = {\n                    actionName: P.key,\n                    category: I,\n                    type: I + \".\" + P.path.join(\".\"),\n                    parent: P.parent,\n                    path: P.path\n                  }, k.actionCreator = function (n, t) {\n                    var r = function (r) {\n                      var e = {\n                        type: n.meta.type,\n                        payload: r\n                      };\n                      return n.$ep_aO && n.meta.resolvedTargets && (r.resolvedTargets = [].concat(n.meta.resolvedTargets)), t.dispatch(e);\n                    };\n\n                    return r.type = n.meta.type, r;\n                  }(k, e), k.actionCreator.definition = k, k.fn.definition = k, u[k.meta.type] = k.actionCreator, a[k.meta.type] = k.fn, \"ePRS\" !== P.key && (k.$ep_aO ? (m.push(k), A(j, p, k.actionCreator)) : A(j, f, k.actionCreator));\n                } else if (b.$ep_t || b.$ep_tO) {\n                  var R = w({}, b),\n                      T = (R.$ep_t ? \"@thunk\" : \"@thunkOn\") + \".\" + P.path.join(\".\");\n                  R.meta = {\n                    actionName: P.key,\n                    parent: P.parent,\n                    path: P.path,\n                    type: T,\n                    startType: T + \"(start)\",\n                    successType: T + \"(success)\",\n                    failType: T + \"(fail)\"\n                  }, R.thunkHandler = function (n, t, r, e) {\n                    return function (o, u) {\n                      var i = {\n                        dispatch: t.dispatch,\n                        fail: u,\n                        getState: function () {\n                          return _(n.meta.parent, t.getState());\n                        },\n                        getStoreActions: function () {\n                          return e;\n                        },\n                        getStoreState: t.getState,\n                        injections: r,\n                        meta: {\n                          key: n.meta.actionName,\n                          parent: n.meta.parent,\n                          path: n.meta.path\n                        }\n                      };\n                      return n.$ep_tO && n.meta.resolvedTargets && (o.resolvedTargets = [].concat(n.meta.resolvedTargets)), n.fn(_(n.meta.parent, e), o, i);\n                    };\n                  }(R, e, r, f), A(j, s, R.thunkHandler), R.actionCreator = function (n, t) {\n                    var r = function (r) {\n                      var e = z(n.meta.startType, function () {\n                        return t.dispatch({\n                          type: n.meta.startType,\n                          payload: r\n                        });\n                      }),\n                          o = z(n.meta.failType, function (e) {\n                        return t.dispatch({\n                          type: n.meta.failType,\n                          payload: r,\n                          error: e\n                        });\n                      }),\n                          u = z(n.meta.successType, function (e) {\n                        return t.dispatch({\n                          type: n.meta.successType,\n                          payload: r,\n                          result: e\n                        });\n                      });\n                      e();\n\n                      var i = null,\n                          c = function (n) {\n                        i = n;\n                      },\n                          f = t.dispatch(function () {\n                        return n.thunkHandler(r, c);\n                      });\n\n                      return x(f) ? f.then(function (n) {\n                        return i ? o(i) : u(n), n;\n                      }) : (i ? o(i) : u(f), f);\n                    };\n\n                    return r.type = n.meta.type, r.successType = n.meta.successType, r.failType = n.meta.failType, r.startType = n.meta.startType, r;\n                  }(R, e), R.actionCreator.definition = R, u[R.meta.type] = R.actionCreator, R.$ep_tO ? (m.push(R), A(j, p, R.actionCreator)) : A(j, f, R.actionCreator);\n                } else if (b.$ep_c) {\n                  var C = _(S, o),\n                      q = function (n, t, r, e, o) {\n                    var u = i(1)(r.fn);\n                    return function (e, o) {\n                      Object.defineProperty(e, t, {\n                        configurable: !0,\n                        enumerable: !0,\n                        get: function () {\n                          var t = _(n, o),\n                              e = r.stateResolvers.map(function (n) {\n                            return n(t, o);\n                          });\n\n                          return u.apply(void 0, e);\n                        }\n                      });\n                    };\n                  }(S, g, b);\n\n                  q(C, o), v.push({\n                    key: g,\n                    parentPath: S,\n                    bindComputedProperty: q\n                  });\n                } else if (b.$ep_r) l.push({\n                  key: g,\n                  parentPath: S,\n                  reducer: b.fn\n                });else if (b.$ep_e) {\n                  var M = w({}, b),\n                      E = \"@effectOn.\" + P.path.join(\".\");\n                  M.meta = {\n                    type: E,\n                    actionName: P.key,\n                    parent: P.parent,\n                    path: P.path,\n                    startType: E + \"(start)\",\n                    successType: E + \"(success)\",\n                    failType: E + \"(fail)\"\n                  };\n\n                  var N = function (n, t, r, e) {\n                    var o,\n                        u = _(n.meta.parent, e);\n\n                    return function (i) {\n                      var c = {\n                        dispatch: t.dispatch,\n                        getState: function () {\n                          return _(n.meta.parent, t.getState());\n                        },\n                        getStoreActions: function () {\n                          return e;\n                        },\n                        getStoreState: t.getState,\n                        injections: r,\n                        meta: {\n                          key: n.meta.actionName,\n                          parent: n.meta.parent,\n                          path: n.meta.path\n                        }\n                      };\n\n                      if (void 0 !== o) {\n                        var f = o();\n                        o = void 0, x(f) && f.catch(V);\n                      }\n\n                      var a = n.fn(u, i, c);\n                      if (x(a)) return a.then(function (n) {\n                        \"function\" == typeof n && \"production\" !== process.env.NODE_ENV && console.warn(\"[easy-peasy] You have an effect which is asynchronously resolving a dispose function. This is considered an anti-pattern. Please read the API documentation for more information.\");\n                      });\n                      \"function\" == typeof a && (o = a);\n                    };\n                  }(M, e, r, f),\n                      J = function (n, t, r) {\n                    var e = function (e, o, u) {\n                      var i = {\n                        prev: e,\n                        current: o,\n                        action: u\n                      },\n                          c = $(n.meta.startType, function () {\n                        return t.dispatch({\n                          type: n.meta.startType,\n                          change: i\n                        });\n                      }),\n                          f = $(n.meta.successType, function () {\n                        return t.dispatch({\n                          type: n.meta.successType,\n                          change: i\n                        });\n                      });\n                      c();\n\n                      try {\n                        var a = t.dispatch(function () {\n                          return r(i);\n                        });\n                        return x(a) ? a.then(function (n) {\n                          return f(n), n;\n                        }, V) : (f(a), a);\n                      } catch (n) {\n                        V(n);\n                      }\n                    };\n\n                    return e.type = n.meta.type, e.startType = n.meta.startType, e.successType = n.meta.successType, e.failType = n.meta.failType, e;\n                  }(M, e, N);\n\n                  M.actionCreator = J, d.push(M);\n                } else c.isPlainObject(b) ? (null == _(j, o) && A(j, o, {}), n(b, j)) : O();\n              } else O();\n            } else h.push(function (n, t) {\n              return void 0 === t && (t = {}), {\n                path: n,\n                config: {\n                  allow: t.allow || [],\n                  deny: t.deny || [],\n                  mergeStrategy: t.mergeStrategy || \"mergeDeep\",\n                  storage: D(t.storage, t.transformers)\n                }\n              };\n            }(S, b));\n          });\n        }(n, []), function (n, t, r, e) {\n          n.forEach(function (n) {\n            var o = n.targetResolver(_(n.meta.parent, t), t),\n                u = (Array.isArray(o) ? o : [o]).reduce(function (n, t) {\n              return \"function\" == typeof t && t.definition.meta.type && r[t.definition.meta.type] ? n.push(t.definition.meta.successType ? t.definition.meta.successType : t.definition.meta.type) : \"string\" == typeof t && n.push(t), n;\n            }, []);\n            n.meta.resolvedTargets = u, u.forEach(function (t) {\n              var o = e[t] || [];\n              o.push(r[n.meta.type]), e[t] = o;\n            });\n          });\n        }(m, f, u, y), {\n          i: u,\n          l: f,\n          p: a,\n          m: v,\n          h: l,\n          s: S,\n          o: o,\n          v: d,\n          S: p,\n          u: y,\n          t: h\n        };\n      }(n.model, n.initialState, n.injections, n.references),\n          o = e.m;\n\n      return {\n        i: e.i,\n        l: e.l,\n        m: o,\n        s: e.s,\n        o: e.o,\n        v: e.v,\n        S: e.S,\n        u: e.u,\n        t: e.t,\n        reducer: r(I(t, e.p, e.h, o))\n      };\n    }({\n      disableImmer: v,\n      initialState: n,\n      injections: h,\n      model: H,\n      reducerEnhancer: Y,\n      references: G\n    });\n  },\n      nn = u || (a && \"undefined\" != typeof window && window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ ? window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({\n    name: T\n  }) : e.compose);\n\n  Z(y);\n  var tn = [F(G)].concat(g, [o, J(G), L(G), W]);\n  P && tn.push(function () {\n    return function () {\n      return function (n) {\n        null != n && K.push(n);\n      };\n    };\n  });\n  var rn = e.createStore(G.internals.reducer, G.internals.o, nn.apply(void 0, [e.applyMiddleware.apply(void 0, tn)].concat(d)));\n  rn.subscribe(function () {\n    G.internals.s.isInReducer = !1;\n  }), G.dispatch = rn.dispatch, G.getState = rn.getState;\n\n  var en = function () {\n    Object.keys(rn.dispatch).forEach(function (n) {\n      delete rn.dispatch[n];\n    }), Object.keys(G.internals.l).forEach(function (n) {\n      rn.dispatch[n] = G.internals.l[n];\n    });\n  };\n\n  en();\n\n  var on = function (n) {\n    var t = rn.getState();\n    n && delete t[n], Z(t), rn.replaceReducer(G.internals.reducer), X(G.internals.o), en();\n  },\n      un = E(Q, X, G);\n\n  return Object.assign(rn, {\n    addModel: function (n, t) {\n      H[n] && \"production\" !== process.env.NODE_ENV && (console.warn('easy-peasy: The store model already contains a model definition for \"' + n + '\"'), rn.removeModel(n)), H[n] = t, on();\n      var r = E(Q, X, G, n);\n      return {\n        resolveRehydration: function () {\n          return r;\n        }\n      };\n    },\n    clearMockedActions: function () {\n      K = [];\n    },\n    getActions: function () {\n      return G.internals.l;\n    },\n    getListeners: function () {\n      return G.internals.S;\n    },\n    getMockedActions: function () {\n      return [].concat(K);\n    },\n    persist: {\n      clear: U.clear,\n      flush: U.flush,\n      resolveRehydration: function () {\n        return un;\n      }\n    },\n    reconfigure: function (n) {\n      H = B(n), on();\n    },\n    removeModel: function (n) {\n      H[n] ? (delete H[n], on(n)) : \"production\" !== process.env.NODE_ENV && console.warn('easy-peasy: The store model does not contain a model definition for \"' + n + '\"');\n    }\n  });\n}\n\nexports.StoreProvider = function (n) {\n  return r.createElement(a.Provider, {\n    value: n.store\n  }, n.children);\n}, exports.action = b, exports.actionOn = function (n, t) {\n  var r;\n  return (r = {}).$ep_aO = !0, r.fn = t, r.targetResolver = n, r;\n}, exports.computed = function (n, t) {\n  var r, e;\n  return \"function\" == typeof t ? ((e = {}).$ep_c = !0, e.fn = t, e.stateResolvers = n, e) : ((r = {}).$ep_c = !0, r.fn = n, r.stateResolvers = j, r);\n}, exports.createContextStore = function (n, e) {\n  void 0 === e && (e = {});\n  var o = e.injections,\n      u = void 0 === o ? {} : o,\n      i = t.createContext();\n  return {\n    Provider: function (t) {\n      var o = t.children,\n          c = t.runtimeModel,\n          a = t.injections;\n\n      if (null != a) {\n        var s = \"function\" == typeof a ? a(u) : a,\n            v = Object.keys(s);\n        Object.keys(u).filter(function (n) {\n          return !v.includes(n);\n        }).forEach(function (n) {\n          delete u[n];\n        }), Object.assign(u, s);\n      }\n\n      var l = f.useMemoOne(function () {\n        return B(\"function\" == typeof n ? n(c) : n, w({}, e, {\n          originalInjections: u\n        }));\n      }, []);\n      return r.createElement(i.Provider, {\n        value: l\n      }, o);\n    },\n    useStore: function () {\n      return t.useContext(i);\n    },\n    useStoreState: v(i),\n    useStoreActions: d(i),\n    useStoreDispatch: y(i),\n    useStoreRehydrated: S(i)\n  };\n}, exports.createStore = B, exports.createTransform = function (n, t, r) {\n  void 0 === r && (r = {});\n  var e = r.whitelist || null,\n      o = r.blacklist || null;\n\n  function u(n) {\n    return !(!e || -1 !== e.indexOf(n)) || !(!o || -1 === o.indexOf(n));\n  }\n\n  return {\n    in: function (t, r, e) {\n      return !u(r) && n ? n(t, r, e) : t;\n    },\n    out: function (n, r, e) {\n      return !u(r) && t ? t(n, r, e) : n;\n    }\n  };\n}, exports.createTypedHooks = function () {\n  return {\n    useStoreActions: p,\n    useStoreDispatch: m,\n    useStoreState: l,\n    useStoreRehydrated: g,\n    useStore: h\n  };\n}, exports.debug = function (n) {\n  return u.isDraft(n) ? u.current(n) : n;\n}, exports.generic = function (n) {\n  return n;\n}, exports.memo = function (n, t) {\n  return i(t)(n);\n}, exports.persist = function (n, t) {\n  var r;\n  return \"undefined\" == typeof window ? n : w({}, n, ((r = {}).$ep_p = t, r));\n}, exports.reducer = function (n) {\n  var t;\n  return (t = {}).$ep_r = !0, t.fn = n, t;\n}, exports.thunk = function (n) {\n  var t;\n  return (t = {}).$ep_t = !0, t.fn = n, t;\n}, exports.thunkOn = function (n, t) {\n  var r;\n  return (r = {}).$ep_tO = !0, r.fn = t, r.targetResolver = n, r;\n}, exports.unstable_effectOn = function (n, t) {\n  var r;\n  return (r = {}).$ep_e = !0, r.dependencyResolvers = n, r.fn = t, r;\n}, exports.useLocalStore = function (n, r, e) {\n  void 0 === r && (r = []);\n  var o = t.useRef(),\n      u = t.useRef(),\n      i = f.useMemoOne(function () {\n    var t = null != o.current ? o.current.getState() : void 0,\n        r = null != e ? e(t, u.current) : void 0,\n        i = B(n(t), r);\n    return u.current = r, o.current = i, i;\n  }, r),\n      c = t.useState(function () {\n    return i.getState();\n  }),\n      a = c[0],\n      s = c[1];\n  return t.useEffect(function () {\n    return i.subscribe(function () {\n      var n = i.getState();\n      a !== n && s(n);\n    });\n  }, [i]), [a, i.getActions(), i];\n}, exports.useStore = h, exports.useStoreActions = p, exports.useStoreDispatch = m, exports.useStoreRehydrated = g, exports.useStoreState = l;","map":{"version":3,"sources":["../src/context.js","../src/hooks.js","../src/helpers.js","../src/lib.js","../src/create-reducer.js","../src/persistence.js","../src/thunks.js","../src/listeners.js","../src/computed-properties.js","../src/effects.js","../src/create-store.js","../src/create-store-internals.js","../src/extract-data-from-model.js","../src/constants.js","../src/actions.js","../src/provider.js","../src/create-context-store.js","../src/create-transform.js","../src/use-local-store.js"],"names":["StoreContext","createContext","useIsomorphicLayoutEffect","window","useLayoutEffect","useEffect","createStoreStateHook","Context","mapState","equalityFn","store","useContext","mapStateRef","useRef","stateRef","mountedRef","subscriptionMapStateError","forceRender","useReducer","s","current","undefined","getState","err","process","env","NODE_ENV","errorMessage","message","stack","Error","checkMapState","newState","unsubscribe","subscribe","useStoreState","EasyPeasyContext","createStoreActionsHook","mapActions","getActions","useStoreActions","createStoreDispatchHook","dispatch","useStoreDispatch","useStore","createStoreRehydratedHook","rehydrated","setRehydrated","useState","persist","resolveRehydration","then","useStoreRehydrated","state","isDraft","fn","cacheSize","memoizerific","targetResolver","action","defaultStateResolvers","fnOrStateResolvers","stateResolvers","dependencyResolvers","value","model","config","easyPeasyImmer","Immer","useProxies","autoFreeze","deepCloneStateWithoutComputed","source","recursiveClone","next","Object","keys","reduce","acc","key","getOwnPropertyDescriptor","get","forEach","isPlainObject","isPromise","x","path","target","cur","newify","currentPath","currentState","finalValue","length","slice","set","idx","disableImmer","draft","createDraft","result","finishDraft","parentPath","parent","iterable","Promise","resolve","reject","iterator","Symbol","total","element","done","all","reducer","error","pSeries","tasks","results","pReduce","_","task","push","body","recover","e","createReducer","_actionReducersDict","_customReducers","_computedProperties","simpleProduce","createSimpleProduce","actionReducer","payload","type","runActionReducerAtPath","definition","meta","red","stateAfterActions","reducerForActions","reducerForCustomReducers","bindComputedProperty","parentState","noopStorage","getItem","setItem","removeItem","getBrowerStorage","storageName","storageCache","localStorage","sessionStorage","createStorageWrapper","storage","transformers","console","warn","outTransformers","reverse","data","JSON","stringify","deserialize","parse","out","isAsync","wrapped","serialize","persistDefinition","allow","deny","mergeStrategy","targets","findIndex","createPersistenceClearer","persistKey","references","internals","_persistenceConfig","map","persistPromise","isPersisting","nextPersistOperation","timingMethod","requestIdleCallback","requestAnimationFrame","nextState","operation","persistTargets","resolvePersistTargets","stateToPersist","rawValue","clear","flush","persistor","rehydrateStateFromPersistIfNeeded","replaceState","root","persistInstance","_defaultState","hasDataModelChanged","dataModel","rehydratingModelData","Array","isArray","originalState","persistedState","targetState","setAt","currentTargetState","currentPersistedState","rehydate","applyRehydrationStrategy","getItemResult","injections","_actionCreators","fail","helpers","getStoreActions","getStoreState","actionName","resolvedTargets","logThunkEventListenerError","log","handleEventDispatchErrors","dispatcher","actionCreator","dispatchStart","startType","dispatchFail","failType","dispatchSuccess","successType","failure","_failure","thunkHandler","resolved","createListenerMiddleware","_listenerActionMap","sourceAction","_actionCreatorDict","listenerDefinitions","targetTypes","targetType","listenerReg","_computedState","memoisedResultFn","storeState","defineProperty","configurable","enumerable","inputs","resolver","createComputedPropertiesMiddleware","isInReducer","createEffectsMiddleware","_effects","prevState","prevLocal","nextLocal","prevDependencies","nextDependencies","some","dependency","logEffectError","actions","dispose","change","disposeResult","effectResult","logEffectEventListenerError","effectHandler","previousDependencies","prev","createStore","options","modelClone","compose","devTools","enhancers","initialState","middleware","mockActions","name","storeName","version","reducerEnhancer","rootReducer","bindReplaceState","modelDef","ePRS","modelDefinition","mockedActions","targetPath","join","createPersistor","persistMiddleware","createPersistMiddleware","bindStoreInternals","createStoreInternals","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","reduxCompose","easyPeasyMiddleware","reduxThunk","reduxCreateStore","applyMiddleware","bindActionCreators","actionsKey","rebindStore","removeKey","replaceReducer","assign","addModel","modelForKey","removeModel","addModelRehydration","clearMockedActions","getListeners","_listenerActionCreators","getMockedActions","reconfigure","newModel","extractDataFromModel","actionThunks","recursiveExtractFromModel","handleValueAsState","initialParentRef","extractPersistConfig","category","createActionCreator","createThunkHandler","createThunkActionsCreator","createComputedPropertyBinder","createEffectHandler","createEffectActionsCreator","sort","a","b","aPath","bPath","bindListenerDefinitions","children","React","Provider","mutableInjections","runtimeModel","nextInjections","nextKeys","filter","k","includes","useMemoOne","originalInjections","inbound","outbound","whitelist","blacklist","whitelistBlacklistCheck","indexOf","in","fullState","modelCreator","dependencies","configCreator","storeRef","configRef","previousState","_store","setCurrentState"],"mappings":"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","sourcesContent":["import { createContext } from 'react';\n\nconst StoreContext = createContext();\n\nexport default StoreContext;\n","import {\n  useContext,\n  useEffect,\n  useLayoutEffect,\n  useReducer,\n  useRef,\n  useState,\n} from 'react';\nimport EasyPeasyContext from './context';\n\n// React currently throws a warning when using useLayoutEffect on the server.\n// To get around it, we can conditionally useEffect on the server (no-op) and\n// useLayoutEffect in the browser. We need useLayoutEffect to ensure the store\n// subscription callback always has the selector from the latest render commit\n// available, otherwise a store update may happen between render and the effect,\n// which may cause missed updates; we also must ensure the store subscription\n// is created synchronously, otherwise a store update may occur before the\n// subscription is created and an inconsistent state may be observed\nconst useIsomorphicLayoutEffect =\n  typeof window !== 'undefined' ? useLayoutEffect : useEffect;\n\nexport function createStoreStateHook(Context) {\n  return function useStoreState(mapState, equalityFn) {\n    const store = useContext(Context);\n    const mapStateRef = useRef(mapState);\n    const stateRef = useRef();\n    const mountedRef = useRef(true);\n    const subscriptionMapStateError = useRef();\n\n    const [, forceRender] = useReducer((s) => s + 1, 0);\n\n    if (\n      subscriptionMapStateError.current ||\n      mapStateRef.current !== mapState ||\n      stateRef.current === undefined\n    ) {\n      try {\n        stateRef.current = mapState(store.getState());\n      } catch (err) {\n        if (process.env.NODE_ENV === 'development') {\n          let errorMessage = `An error occurred trying to map state in a useStoreState hook: ${err.message}.`;\n          if (subscriptionMapStateError.current) {\n            errorMessage += `\\nThis error may be related to the following error:\\n${subscriptionMapStateError.current.stack}\\n\\nOriginal stack trace:`;\n          }\n          throw new Error(errorMessage);\n        }\n        throw subscriptionMapStateError.current || err;\n      }\n    }\n\n    useIsomorphicLayoutEffect(() => {\n      mapStateRef.current = mapState;\n      subscriptionMapStateError.current = undefined;\n    });\n\n    useIsomorphicLayoutEffect(() => {\n      const checkMapState = () => {\n        try {\n          const newState = mapStateRef.current(store.getState());\n\n          const isStateEqual =\n            typeof equalityFn === 'function'\n              ? equalityFn(stateRef.current, newState)\n              : stateRef.current === newState;\n\n          if (isStateEqual) {\n            return;\n          }\n\n          stateRef.current = newState;\n        } catch (err) {\n          // see https://github.com/reduxjs/react-redux/issues/1179\n          // There is a possibility mapState will fail due to stale state or\n          // props, therefore we will just track the error and force our\n          // component to update. It should then receive the updated state\n          subscriptionMapStateError.current = err;\n        }\n        if (mountedRef.current) {\n          forceRender({});\n        }\n      };\n      const unsubscribe = store.subscribe(checkMapState);\n      checkMapState();\n      return () => {\n        mountedRef.current = false;\n        unsubscribe();\n      };\n    }, []);\n\n    return stateRef.current;\n  };\n}\n\nexport const useStoreState = createStoreStateHook(EasyPeasyContext);\n\nexport function createStoreActionsHook(Context) {\n  return function useStoreActions(mapActions) {\n    const store = useContext(Context);\n    return mapActions(store.getActions());\n  };\n}\n\nexport const useStoreActions = createStoreActionsHook(EasyPeasyContext);\n\nexport function createStoreDispatchHook(Context) {\n  return function useStoreDispatch() {\n    const store = useContext(Context);\n    return store.dispatch;\n  };\n}\n\nexport const useStoreDispatch = createStoreDispatchHook(EasyPeasyContext);\n\nexport function useStore() {\n  return useContext(EasyPeasyContext);\n}\n\nexport function createStoreRehydratedHook(Context) {\n  return function useStoreRehydrated() {\n    const store = useContext(Context);\n    const [rehydrated, setRehydrated] = useState(false);\n    useEffect(() => {\n      store.persist.resolveRehydration().then(() => setRehydrated(true));\n    }, []);\n    return rehydrated;\n  };\n}\n\nexport const useStoreRehydrated = createStoreRehydratedHook(EasyPeasyContext);\n\nexport function createTypedHooks() {\n  return {\n    useStoreActions,\n    useStoreDispatch,\n    useStoreState,\n    useStoreRehydrated,\n    useStore,\n  };\n}\n","import { isDraft, current } from 'immer';\nimport memoizerific from 'memoizerific';\nimport {\n  actionOnSymbol,\n  actionSymbol,\n  computedSymbol,\n  effectOnSymbol,\n  persistSymbol,\n  reducerSymbol,\n  thunkOnSymbol,\n  thunkSymbol,\n} from './constants';\n\nexport const debug = (state) => {\n  if (isDraft(state)) {\n    return current(state);\n  }\n  return state;\n};\n\nexport const memo = (fn, cacheSize) => memoizerific(cacheSize)(fn);\n\nexport const actionOn = (targetResolver, fn) => {\n  return {\n    [actionOnSymbol]: true,\n    fn,\n    targetResolver,\n  };\n};\n\nexport const action = (fn) => {\n  return {\n    [actionSymbol]: true,\n    fn,\n  };\n};\n\nconst defaultStateResolvers = [(state) => state];\n\nexport const computed = (fnOrStateResolvers, fn) => {\n  if (typeof fn === 'function') {\n    return {\n      [computedSymbol]: true,\n      fn,\n      stateResolvers: fnOrStateResolvers,\n    };\n  }\n  return {\n    [computedSymbol]: true,\n    fn: fnOrStateResolvers,\n    stateResolvers: defaultStateResolvers,\n  };\n};\n\nexport function unstable_effectOn(dependencyResolvers, fn) {\n  return {\n    [effectOnSymbol]: true,\n    dependencyResolvers,\n    fn,\n  };\n}\n\nexport function generic(value) {\n  return value;\n}\n\nexport const persist = (model, config) => {\n  // if we are not running in a browser context this becomes a no-op\n  return typeof window === 'undefined'\n    ? model\n    : {\n        ...model,\n        [persistSymbol]: config,\n      };\n};\n\nexport const thunkOn = (targetResolver, fn) => {\n  return {\n    [thunkOnSymbol]: true,\n    fn,\n    targetResolver,\n  };\n};\n\nexport const thunk = (fn) => {\n  return {\n    [thunkSymbol]: true,\n    fn,\n  };\n};\n\nexport const reducer = (fn) => {\n  return {\n    [reducerSymbol]: true,\n    fn,\n  };\n};\n","import { isPlainObject } from 'is-plain-object';\nimport { Immer, isDraft } from 'immer';\n\n/**\n * We create our own immer instance to avoid potential issues with autoFreeze\n * becoming default enabled everywhere. We want to disable autofreeze as it\n * does not suit the design of Easy Peasy.\n * https://github.com/immerjs/immer/issues/681#issuecomment-705581111\n */\nconst easyPeasyImmer = new Immer({\n  useProxies: true,\n  autoFreeze: false,\n});\n\nexport const deepCloneStateWithoutComputed = (source) => {\n  const recursiveClone = (current) => {\n    const next = Object.keys(current).reduce((acc, key) => {\n      if (Object.getOwnPropertyDescriptor(current, key).get == null) {\n        acc[key] = current[key];\n      }\n      return acc;\n    }, {});\n    Object.keys(next).forEach((key) => {\n      if (isPlainObject(next[key])) {\n        next[key] = recursiveClone(next[key]);\n      }\n    });\n    return next;\n  };\n  return recursiveClone(source);\n};\n\nexport const isPromise = (x) => {\n  return x != null && typeof x === 'object' && typeof x.then === 'function';\n};\n\nexport function get(path, target) {\n  return path.reduce((acc, cur) => {\n    return isPlainObject(acc) ? acc[cur] : undefined;\n  }, target);\n}\n\nexport function newify(currentPath, currentState, finalValue) {\n  if (currentPath.length === 0) {\n    return finalValue;\n  }\n  const newState = { ...currentState };\n  const key = currentPath[0];\n  if (currentPath.length === 1) {\n    newState[key] = finalValue;\n  } else {\n    newState[key] = newify(currentPath.slice(1), newState[key], finalValue);\n  }\n  return newState;\n}\n\nexport const set = (path, target, value) => {\n  if (path.length === 0) {\n    if (typeof value === 'object') {\n      Object.keys(target).forEach((key) => {\n        delete target[key];\n      });\n      Object.keys(value).forEach((key) => {\n        target[key] = value[key];\n      });\n    }\n    return;\n  }\n  path.reduce((acc, cur, idx) => {\n    if (idx + 1 === path.length) {\n      acc[cur] = value;\n    } else {\n      acc[cur] = acc[cur] || {};\n    }\n    return acc[cur];\n  }, target);\n};\n\nexport function createSimpleProduce(disableImmer = false) {\n  return function simpleProduce(path, state, fn) {\n    if (disableImmer) {\n      const current = get(path, state);\n      const next = fn(current);\n      if (current !== next) {\n        return newify(path, state, next);\n      }\n      return state;\n    }\n    if (path.length === 0) {\n      const draft = easyPeasyImmer.createDraft(state);\n      const result = fn(draft);\n      if (result) {\n        return isDraft(result) ? easyPeasyImmer.finishDraft(result) : result;\n      }\n      return easyPeasyImmer.finishDraft(draft);\n    }\n    const parentPath = path.slice(0, path.length - 1);\n    const draft = easyPeasyImmer.createDraft(state);\n    const parent = get(parentPath, state);\n    const current = get(path, draft);\n    const result = fn(current);\n\n    if (result) {\n      parent[path[path.length - 1]] = result;\n    }\n    return easyPeasyImmer.finishDraft(draft);\n  };\n}\n\nconst pReduce = (iterable, reducer, initialValue) =>\n  new Promise((resolve, reject) => {\n    const iterator = iterable[Symbol.iterator]();\n    let index = 0;\n\n    const next = async (total) => {\n      const element = iterator.next();\n\n      if (element.done) {\n        resolve(total);\n        return;\n      }\n\n      try {\n        const value = await Promise.all([total, element.value]);\n        // eslint-disable-next-line no-plusplus\n        next(reducer(value[0], value[1], index++));\n      } catch (error) {\n        reject(error);\n      }\n    };\n\n    next(initialValue);\n  });\n\nexport const pSeries = async (tasks) => {\n  const results = [];\n\n  await pReduce(tasks, async (_, task) => {\n    const value = await task();\n    results.push(value);\n  });\n\n  return results;\n};\n","import { createSimpleProduce, get } from './lib';\n\nexport default function createReducer(\n  disableImmer,\n  _actionReducersDict,\n  _customReducers,\n  _computedProperties,\n) {\n  const simpleProduce = createSimpleProduce(disableImmer);\n\n  const runActionReducerAtPath = (state, action, actionReducer, path) => {\n    return simpleProduce(path, state, (draft) =>\n      actionReducer(draft, action.payload),\n    );\n  };\n\n  const reducerForActions = (state, action) => {\n    const actionReducer = _actionReducersDict[action.type];\n    if (actionReducer) {\n      return runActionReducerAtPath(\n        state,\n        action,\n        actionReducer,\n        actionReducer.definition.meta.parent,\n      );\n    }\n    return state;\n  };\n\n  const reducerForCustomReducers = (state, action) => {\n    return _customReducers.reduce((acc, { parentPath, key, reducer: red }) => {\n      return simpleProduce(parentPath, acc, (draft) => {\n        draft[key] = red(draft[key], action);\n        return draft;\n      });\n    }, state);\n  };\n\n  const rootReducer = (state, action) => {\n    const stateAfterActions = reducerForActions(state, action);\n    const next =\n      _customReducers.length > 0\n        ? reducerForCustomReducers(stateAfterActions, action)\n        : stateAfterActions;\n    if (state !== next) {\n      _computedProperties.forEach(({ parentPath, bindComputedProperty }) => {\n        const parentState = get(parentPath, next);\n        if (parentState != null) bindComputedProperty(parentState, next);\n      });\n    }\n    return next;\n  };\n\n  return rootReducer;\n}\n","import { isPlainObject } from 'is-plain-object';\nimport {\n  deepCloneStateWithoutComputed,\n  get,\n  isPromise,\n  set,\n  pSeries,\n} from './lib';\n\nconst noopStorage = {\n  getItem: () => undefined,\n  setItem: () => undefined,\n  removeItem: () => undefined,\n};\n\nconst getBrowerStorage = (storageName) => {\n  let storageCache;\n  return () => {\n    if (!storageCache) {\n      try {\n        if (\n          typeof window !== 'undefined' &&\n          typeof window[storageName] !== 'undefined'\n        ) {\n          storageCache = window[storageName];\n        }\n      } catch (_) {\n        // swallow the failure\n      }\n      if (!storageCache) {\n        storageCache = noopStorage;\n      }\n    }\n\n    return storageCache;\n  };\n};\n\nconst localStorage = getBrowerStorage('localStorage');\nconst sessionStorage = getBrowerStorage('sessionStorage');\n\nfunction createStorageWrapper(storage, transformers = []) {\n  if (storage == null) {\n    storage = sessionStorage();\n  }\n\n  if (typeof storage === 'string') {\n    if (storage === 'localStorage') {\n      storage = localStorage();\n    } else if (storage === 'sessionStorage') {\n      storage = sessionStorage();\n    } else {\n      if (process.env.NODE_ENV === 'development') {\n        console.warn(\n          `Invalid storage provider specified for Easy Peasy persist: ${storage}\\nValid values include \"localStorage\", \"sessionStorage\" or a custom storage engine.`,\n        );\n      }\n      storage = noopStorage;\n    }\n  }\n\n  const outTransformers = [...transformers].reverse();\n\n  const serialize = (data) => {\n    if (transformers.length > 0 && data != null && typeof data === 'object') {\n      Object.keys(data).forEach((key) => {\n        data[key] = transformers.reduce((acc, cur) => {\n          return cur.in(acc, key);\n        }, data[key]);\n      });\n    }\n\n    return storage === localStorage() || storage === sessionStorage()\n      ? JSON.stringify({ data })\n      : data;\n  };\n\n  const deserialize = (data) => {\n    const result =\n      storage === localStorage() || storage === sessionStorage()\n        ? JSON.parse(data).data\n        : data;\n    if (\n      outTransformers.length > 0 &&\n      result != null &&\n      typeof result === 'object'\n    ) {\n      Object.keys(result).forEach((key) => {\n        result[key] = outTransformers.reduce((acc, cur) => {\n          return cur.out(acc, key);\n        }, result[key]);\n      });\n    }\n    return result;\n  };\n\n  const isAsync = isPromise(storage.getItem('_'));\n\n  return {\n    isAsync,\n    getItem: (key) => {\n      if (isAsync) {\n        return storage.getItem(key).then((wrapped) => {\n          return wrapped != null ? deserialize(wrapped) : undefined;\n        });\n      }\n      const wrapped = storage.getItem(key);\n      return wrapped != null ? deserialize(wrapped) : undefined;\n    },\n    setItem: (key, data) => {\n      return storage.setItem(key, serialize(data));\n    },\n    removeItem: (key) => {\n      return storage.removeItem(key);\n    },\n  };\n}\n\nexport function extractPersistConfig(path, persistDefinition = {}) {\n  return {\n    path,\n    config: {\n      allow: persistDefinition.allow || [],\n      deny: persistDefinition.deny || [],\n      mergeStrategy: persistDefinition.mergeStrategy || 'mergeDeep',\n      storage: createStorageWrapper(\n        persistDefinition.storage,\n        persistDefinition.transformers,\n      ),\n    },\n  };\n}\n\nfunction resolvePersistTargets(target, allow, deny) {\n  let targets = Object.keys(target);\n  if (allow.length > 0) {\n    targets = targets.reduce((acc, cur) => {\n      if (allow.findIndex((x) => x === cur) !== -1) {\n        return [...acc, cur];\n      }\n      return acc;\n    }, []);\n  }\n  if (deny.length > 0) {\n    targets = targets.reduce((acc, cur) => {\n      if (deny.findIndex((x) => x === cur) !== -1) {\n        return acc;\n      }\n      return [...acc, cur];\n    }, []);\n  }\n  return targets;\n}\n\nfunction createPersistenceClearer(persistKey, references) {\n  return () => {\n    if (references.internals._persistenceConfig.length === 0) {\n      return Promise.resolve();\n    }\n    return pSeries(\n      references.internals._persistenceConfig.map(({ path, config }) => () =>\n        Promise.resolve(config.storage.removeItem(persistKey(path))),\n      ),\n    );\n  };\n}\n\nexport function createPersistor(persistKey, references) {\n  let persistPromise = Promise.resolve();\n  let isPersisting = false;\n  let nextPersistOperation;\n\n  const timingMethod =\n    typeof window === 'undefined'\n      ? (fn) => fn()\n      : window.requestIdleCallback != null\n      ? window.requestIdleCallback\n      : window.requestAnimationFrame;\n\n  const persist = (nextState) => {\n    if (references.internals._persistenceConfig.length === 0) {\n      return;\n    }\n\n    const operation = () => {\n      isPersisting = true;\n      persistPromise = new Promise((resolve) => {\n        timingMethod(() => {\n          pSeries(\n            references.internals._persistenceConfig.map(\n              ({ path, config }) => () => {\n                const { storage, allow, deny } = config;\n                const persistRootState = deepCloneStateWithoutComputed(\n                  get(path, nextState),\n                );\n                const persistTargets = resolvePersistTargets(\n                  persistRootState,\n                  allow,\n                  deny,\n                );\n                const stateToPersist = {};\n                persistTargets.map((key) => {\n                  const targetPath = [...path, key];\n                  const rawValue = get(targetPath, nextState);\n                  const value = isPlainObject(rawValue)\n                    ? deepCloneStateWithoutComputed(rawValue)\n                    : rawValue;\n                  stateToPersist[key] = value;\n                });\n                return Promise.resolve(\n                  storage.setItem(persistKey(path), stateToPersist),\n                );\n              },\n            ),\n          ).finally(() => {\n            isPersisting = false;\n            if (nextPersistOperation) {\n              const next = nextPersistOperation;\n              nextPersistOperation = null;\n              next();\n            } else {\n              resolve();\n            }\n          });\n        });\n      });\n    };\n\n    if (isPersisting) {\n      nextPersistOperation = operation;\n    } else {\n      operation();\n    }\n  };\n\n  return {\n    persist,\n    clear: createPersistenceClearer(persistKey, references),\n    flush: async () => {\n      if (nextPersistOperation) {\n        nextPersistOperation();\n      }\n      await persistPromise;\n    },\n  };\n}\n\nexport function createPersistMiddleware(persistor, references) {\n  return ({ getState }) => (next) => (action) => {\n    const state = next(action);\n    if (\n      action &&\n      action.type !== '@action.ePRS' &&\n      references.internals._persistenceConfig.length > 0\n    ) {\n      persistor.persist(getState());\n    }\n    return state;\n  };\n}\n\nexport function rehydrateStateFromPersistIfNeeded(\n  persistKey,\n  replaceState,\n  references,\n  root,\n) {\n  if (references.internals._persistenceConfig.length === 0) {\n    return Promise.resolve();\n  }\n\n  return pSeries(\n    references.internals._persistenceConfig.map((persistInstance) => () => {\n      const { path, config } = persistInstance;\n      const { mergeStrategy, storage } = config;\n\n      if (root && (path.length < 1 || path[0] !== root)) {\n        return Promise.resolve();\n      }\n\n      const state = references.internals._defaultState;\n\n      const hasDataModelChanged = (dataModel, rehydratingModelData) =>\n        dataModel != null &&\n        rehydratingModelData != null &&\n        (typeof dataModel !== typeof rehydratingModelData ||\n          (Array.isArray(dataModel) && !Array.isArray(rehydratingModelData)));\n\n      const applyRehydrationStrategy = (originalState, persistedState) => {\n        if (mergeStrategy === 'overwrite') {\n          set(path, originalState, persistedState);\n        } else if (mergeStrategy === 'mergeShallow') {\n          const targetState = get(path, originalState);\n          Object.keys(persistedState).forEach((key) => {\n            if (hasDataModelChanged(targetState[key], persistedState[key])) {\n              // skip as the data model type has changed since the data was persisted\n            } else {\n              targetState[key] = persistedState[key];\n            }\n          });\n        } else if (mergeStrategy === 'mergeDeep') {\n          const targetState = get(path, originalState);\n          const setAt = (currentTargetState, currentPersistedState) => {\n            Object.keys(currentPersistedState).forEach((key) => {\n              if (\n                hasDataModelChanged(\n                  currentTargetState[key],\n                  currentPersistedState[key],\n                )\n              ) {\n                // skip as the data model type has changed since the data was persisted\n              } else if (isPlainObject(currentPersistedState[key])) {\n                currentTargetState[key] = currentTargetState[key] || {};\n                setAt(currentTargetState[key], currentPersistedState[key]);\n              } else {\n                currentTargetState[key] = currentPersistedState[key];\n              }\n            });\n          };\n          setAt(targetState, persistedState);\n        }\n      };\n\n      const rehydate = (persistedState) => {\n        if (persistedState != null) {\n          applyRehydrationStrategy(state, persistedState);\n        }\n        replaceState(state);\n      };\n\n      const getItemResult = storage.getItem(persistKey(path));\n      if (isPromise(getItemResult)) {\n        return getItemResult.then(rehydate);\n      }\n      return Promise.resolve(rehydate(getItemResult));\n    }),\n  );\n}\n","import { thunkOnSymbol } from './constants';\nimport { get, isPromise } from './lib';\n\nexport function createThunkHandler(\n  definition,\n  references,\n  injections,\n  _actionCreators,\n) {\n  return (payload, fail) => {\n    const helpers = {\n      dispatch: references.dispatch,\n      fail,\n      getState: () => get(definition.meta.parent, references.getState()),\n      getStoreActions: () => _actionCreators,\n      getStoreState: references.getState,\n      injections,\n      meta: {\n        key: definition.meta.actionName,\n        parent: definition.meta.parent,\n        path: definition.meta.path,\n      },\n    };\n    if (definition[thunkOnSymbol] && definition.meta.resolvedTargets) {\n      payload.resolvedTargets = [...definition.meta.resolvedTargets];\n    }\n    return definition.fn(\n      get(definition.meta.parent, _actionCreators),\n      payload,\n      helpers,\n    );\n  };\n}\n\nconst logThunkEventListenerError = (type, err) => {\n  // eslint-disable-next-line no-console\n  console.log(`An error occurred in a listener for ${type}`);\n  // eslint-disable-next-line no-console\n  console.log(err);\n};\n\nconst handleEventDispatchErrors = (type, dispatcher) => (...args) => {\n  try {\n    const result = dispatcher(...args);\n    if (isPromise(result)) {\n      result.catch((err) => {\n        logThunkEventListenerError(type, err);\n      });\n    }\n  } catch (err) {\n    logThunkEventListenerError(type, err);\n  }\n};\n\nexport function createThunkActionsCreator(definition, references) {\n  const actionCreator = (payload) => {\n    const dispatchStart = handleEventDispatchErrors(\n      definition.meta.startType,\n      () =>\n        references.dispatch({\n          type: definition.meta.startType,\n          payload,\n        }),\n    );\n\n    const dispatchFail = handleEventDispatchErrors(\n      definition.meta.failType,\n      (err) =>\n        references.dispatch({\n          type: definition.meta.failType,\n          payload,\n          error: err,\n        }),\n    );\n\n    const dispatchSuccess = handleEventDispatchErrors(\n      definition.meta.successType,\n      (result) =>\n        references.dispatch({\n          type: definition.meta.successType,\n          payload,\n          result,\n        }),\n    );\n\n    dispatchStart();\n\n    let failure = null;\n\n    const fail = (_failure) => {\n      failure = _failure;\n    };\n\n    const result = references.dispatch(() =>\n      definition.thunkHandler(payload, fail),\n    );\n\n    if (isPromise(result)) {\n      return result.then((resolved) => {\n        if (failure) {\n          dispatchFail(failure);\n        } else {\n          dispatchSuccess(resolved);\n        }\n        return resolved;\n      });\n    }\n\n    if (failure) {\n      dispatchFail(failure);\n    } else {\n      dispatchSuccess(result);\n    }\n\n    return result;\n  };\n\n  actionCreator.type = definition.meta.type;\n  actionCreator.successType = definition.meta.successType;\n  actionCreator.failType = definition.meta.failType;\n  actionCreator.startType = definition.meta.startType;\n\n  return actionCreator;\n}\n","import { get } from './lib';\n\nexport function createListenerMiddleware(references) {\n  return () => (next) => (action) => {\n    const result = next(action);\n    if (\n      action &&\n      references.internals._listenerActionMap[action.type] &&\n      references.internals._listenerActionMap[action.type].length > 0\n    ) {\n      const sourceAction = references.internals._actionCreatorDict[action.type];\n      references.internals._listenerActionMap[action.type].forEach(\n        (actionCreator) => {\n          actionCreator({\n            type: sourceAction\n              ? sourceAction.definition.meta.type\n              : action.type,\n            payload: action.payload,\n            error: action.error,\n            result: action.result,\n          });\n        },\n      );\n    }\n    return result;\n  };\n}\n\nexport function bindListenerDefinitions(\n  listenerDefinitions,\n  _actionCreators,\n  _actionCreatorDict,\n  _listenerActionMap,\n) {\n  listenerDefinitions.forEach((definition) => {\n    const targets = definition.targetResolver(\n      get(definition.meta.parent, _actionCreators),\n      _actionCreators,\n    );\n\n    const targetTypes = (Array.isArray(targets) ? targets : [targets]).reduce(\n      (acc, target) => {\n        if (\n          typeof target === 'function' &&\n          target.definition.meta.type &&\n          _actionCreatorDict[target.definition.meta.type]\n        ) {\n          if (target.definition.meta.successType) {\n            acc.push(target.definition.meta.successType);\n            // acc.push(target.definition.meta.failType);\n          } else {\n            acc.push(target.definition.meta.type);\n          }\n        } else if (typeof target === 'string') {\n          acc.push(target);\n        }\n        return acc;\n      },\n      [],\n    );\n\n    definition.meta.resolvedTargets = targetTypes;\n\n    targetTypes.forEach((targetType) => {\n      const listenerReg = _listenerActionMap[targetType] || [];\n      listenerReg.push(_actionCreatorDict[definition.meta.type]);\n      _listenerActionMap[targetType] = listenerReg;\n    });\n  });\n}\n","import memoizerific from 'memoizerific';\nimport { get } from './lib';\n\nexport function createComputedPropertyBinder(\n  parentPath,\n  key,\n  definition,\n  _computedState,\n  references,\n) {\n  const memoisedResultFn = memoizerific(1)(definition.fn);\n  return function createComputedProperty(parentState, storeState) {\n    Object.defineProperty(parentState, key, {\n      configurable: true,\n      enumerable: true,\n      get: () => {\n        const state = get(parentPath, storeState);\n        const inputs = definition.stateResolvers.map((resolver) =>\n          resolver(state, storeState),\n        );\n        return memoisedResultFn(...inputs);\n      },\n    });\n  };\n}\n\nexport function createComputedPropertiesMiddleware(references) {\n  return (store) => (next) => (action) => {\n    references.internals._computedState.currentState = store.getState();\n    references.internals._computedState.isInReducer = true;\n    return next(action);\n  };\n}\n","import { get, isPromise } from './lib';\n\nexport function createEffectsMiddleware(references) {\n  return (store) => (next) => (action) => {\n    if (references.internals._effects.length === 0) {\n      return next(action);\n    }\n    const prevState = store.getState();\n    const result = next(action);\n    const nextState = store.getState();\n    references.internals._effects.forEach((definition) => {\n      const prevLocal = get(definition.meta.parent, prevState);\n      const nextLocal = get(definition.meta.parent, nextState);\n      if (prevLocal !== nextLocal) {\n        const prevDependencies = definition.dependencyResolvers.map(\n          (resolver) => resolver(prevLocal),\n        );\n        const nextDependencies = definition.dependencyResolvers.map(\n          (resolver) => resolver(nextLocal),\n        );\n        const hasChanged = prevDependencies.some((dependency, idx) => {\n          return dependency !== nextDependencies[idx];\n        });\n        if (hasChanged) {\n          definition.actionCreator(prevDependencies, nextDependencies, action);\n        }\n      }\n    });\n    return result;\n  };\n}\n\nconst logEffectError = (err) => {\n  // As users can't get a handle on effects we need to report the error\n  // eslint-disable-next-line no-console\n  console.log(err);\n};\n\nexport function createEffectHandler(\n  definition,\n  references,\n  injections,\n  _actionCreators,\n) {\n  const actions = get(definition.meta.parent, _actionCreators);\n\n  let dispose;\n\n  return (change) => {\n    const helpers = {\n      dispatch: references.dispatch,\n      getState: () => get(definition.meta.parent, references.getState()),\n      getStoreActions: () => _actionCreators,\n      getStoreState: references.getState,\n      injections,\n      meta: {\n        key: definition.meta.actionName,\n        parent: definition.meta.parent,\n        path: definition.meta.path,\n      },\n    };\n\n    if (dispose !== undefined) {\n      const disposeResult = dispose();\n      dispose = undefined;\n      if (isPromise(disposeResult)) {\n        disposeResult.catch(logEffectError);\n      }\n    }\n\n    const effectResult = definition.fn(actions, change, helpers);\n\n    if (isPromise(effectResult)) {\n      return effectResult.then((resolved) => {\n        if (typeof resolved === 'function') {\n          if (process.env.NODE_ENV !== 'production') {\n            // Dispose functions are not allowed to be resolved asynchronously.\n            // Doing so would provide inconsistent behaviour around their execution.\n            // eslint-disable-next-line no-console\n            console.warn(\n              '[easy-peasy] You have an effect which is asynchronously resolving a dispose function. This is considered an anti-pattern. Please read the API documentation for more information.',\n            );\n          }\n        }\n      });\n    }\n\n    if (typeof effectResult === 'function') {\n      dispose = effectResult;\n    }\n\n    return undefined;\n  };\n}\n\nconst logEffectEventListenerError = (type, err) => {\n  // eslint-disable-next-line no-console\n  console.log(`An error occurred in a listener for ${type}`);\n  // eslint-disable-next-line no-console\n  console.log(err);\n};\n\nconst handleEventDispatchErrors = (type, dispatcher) => (...args) => {\n  try {\n    const result = dispatcher(...args);\n    if (isPromise(result)) {\n      result.catch((err) => {\n        logEffectEventListenerError(type, err);\n      });\n    }\n  } catch (err) {\n    logEffectEventListenerError(type, err);\n  }\n};\n\nexport function createEffectActionsCreator(\n  definition,\n  references,\n  effectHandler,\n) {\n  const actionCreator = (previousDependencies, nextDependencies, action) => {\n    const change = {\n      prev: previousDependencies,\n      current: nextDependencies,\n      action,\n    };\n\n    const dispatchStart = handleEventDispatchErrors(\n      definition.meta.startType,\n      () =>\n        references.dispatch({\n          type: definition.meta.startType,\n          change,\n        }),\n    );\n\n    const dispatchSuccess = handleEventDispatchErrors(\n      definition.meta.successType,\n      () =>\n        references.dispatch({\n          type: definition.meta.successType,\n          change,\n        }),\n    );\n\n    dispatchStart();\n\n    try {\n      const result = references.dispatch(() => effectHandler(change));\n\n      if (isPromise(result)) {\n        return result.then((resolved) => {\n          dispatchSuccess(resolved);\n          return resolved;\n        }, logEffectError);\n      }\n\n      dispatchSuccess(result);\n\n      return result;\n    } catch (err) {\n      logEffectError(err);\n    }\n  };\n\n  actionCreator.type = definition.meta.type;\n  actionCreator.startType = definition.meta.startType;\n  actionCreator.successType = definition.meta.successType;\n  actionCreator.failType = definition.meta.failType;\n\n  return actionCreator;\n}\n","import {\n  applyMiddleware,\n  compose as reduxCompose,\n  createStore as reduxCreateStore,\n} from 'redux';\nimport reduxThunk from 'redux-thunk';\nimport * as helpers from './helpers';\nimport createStoreInternals from './create-store-internals';\nimport {\n  createPersistor,\n  createPersistMiddleware,\n  rehydrateStateFromPersistIfNeeded,\n} from './persistence';\nimport { createComputedPropertiesMiddleware } from './computed-properties';\nimport { createListenerMiddleware } from './listeners';\nimport { deepCloneStateWithoutComputed } from './lib';\nimport { createEffectsMiddleware } from './effects';\n\nexport default function createStore(model, options = {}) {\n  const modelClone = deepCloneStateWithoutComputed(model);\n  const {\n    compose,\n    devTools = process.env.NODE_ENV !== 'production',\n    disableImmer = false,\n    enhancers = [],\n    initialState = {},\n    injections = {},\n    middleware = [],\n    mockActions = false,\n    name: storeName = `EasyPeasyStore`,\n    version = 0,\n    reducerEnhancer = (rootReducer) => rootReducer,\n  } = options;\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (typeof injections !== 'object') {\n      throw new Error('[easy-peasy] Store injections must be an object');\n    }\n  }\n\n  const bindReplaceState = (modelDef) => {\n    return {\n      ...modelDef,\n      ePRS: helpers.action((_, payload) => payload),\n    };\n  };\n\n  const references = {};\n\n  let modelDefinition = bindReplaceState(modelClone);\n  let mockedActions = [];\n\n  const persistKey = (targetPath) =>\n    `[${storeName}][${version}]${\n      targetPath.length > 0 ? `[${targetPath.join('.')}]` : ''\n    }`;\n  const persistor = createPersistor(persistKey, references);\n  const persistMiddleware = createPersistMiddleware(persistor, references);\n\n  const replaceState = (nextState) =>\n    references.internals._actionCreatorDict['@action.ePRS'](nextState);\n\n  const bindStoreInternals = (state = {}) => {\n    references.internals = createStoreInternals({\n      disableImmer,\n      initialState: state,\n      injections,\n      model: modelDefinition,\n      reducerEnhancer,\n      references,\n    });\n  };\n\n  const mockActionsMiddleware = () => () => (action) => {\n    if (action != null) {\n      mockedActions.push(action);\n    }\n    return undefined;\n  };\n\n  const composeEnhancers =\n    compose ||\n    (devTools &&\n    typeof window !== 'undefined' &&\n    window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__\n      ? window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({\n          name: storeName,\n        })\n      : reduxCompose);\n\n  bindStoreInternals(initialState);\n\n  const easyPeasyMiddleware = [\n    createComputedPropertiesMiddleware(references),\n    ...middleware,\n    reduxThunk,\n    createListenerMiddleware(references),\n    createEffectsMiddleware(references),\n    persistMiddleware,\n  ];\n\n  if (mockActions) {\n    easyPeasyMiddleware.push(mockActionsMiddleware);\n  }\n\n  const store = reduxCreateStore(\n    references.internals.reducer,\n    references.internals._defaultState,\n    composeEnhancers(applyMiddleware(...easyPeasyMiddleware), ...enhancers),\n  );\n\n  store.subscribe(() => {\n    references.internals._computedState.isInReducer = false;\n  });\n\n  references.dispatch = store.dispatch;\n  references.getState = store.getState;\n\n  const bindActionCreators = () => {\n    Object.keys(store.dispatch).forEach((actionsKey) => {\n      delete store.dispatch[actionsKey];\n    });\n    Object.keys(references.internals._actionCreators).forEach((key) => {\n      store.dispatch[key] = references.internals._actionCreators[key];\n    });\n  };\n\n  bindActionCreators();\n\n  const rebindStore = (removeKey) => {\n    const currentState = store.getState();\n    if (removeKey) {\n      delete currentState[removeKey];\n    }\n    bindStoreInternals(currentState);\n    store.replaceReducer(references.internals.reducer);\n    replaceState(references.internals._defaultState);\n    bindActionCreators();\n  };\n\n  const resolveRehydration = rehydrateStateFromPersistIfNeeded(\n    persistKey,\n    replaceState,\n    references,\n  );\n\n  return Object.assign(store, {\n    addModel: (key, modelForKey) => {\n      if (modelDefinition[key] && process.env.NODE_ENV !== 'production') {\n        // eslint-disable-next-line no-console\n        console.warn(\n          `easy-peasy: The store model already contains a model definition for \"${key}\"`,\n        );\n        store.removeModel(key);\n      }\n      modelDefinition[key] = modelForKey;\n      rebindStore();\n      // There may have been persisted state for a dynamic model. We should try\n      // and rehydrate the specifc node\n      const addModelRehydration = rehydrateStateFromPersistIfNeeded(\n        persistKey,\n        replaceState,\n        references,\n        key,\n      );\n      return {\n        resolveRehydration: () => addModelRehydration,\n      };\n    },\n    clearMockedActions: () => {\n      mockedActions = [];\n    },\n    getActions: () => references.internals._actionCreators,\n    getListeners: () => references.internals._listenerActionCreators,\n    getMockedActions: () => [...mockedActions],\n    persist: {\n      clear: persistor.clear,\n      flush: persistor.flush,\n      resolveRehydration: () => resolveRehydration,\n    },\n    reconfigure: (newModel) => {\n      modelDefinition = bindReplaceState(newModel);\n      rebindStore();\n    },\n    removeModel: (key) => {\n      if (!modelDefinition[key]) {\n        if (process.env.NODE_ENV !== 'production') {\n          // eslint-disable-next-line no-console\n          console.warn(\n            `easy-peasy: The store model does not contain a model definition for \"${key}\"`,\n          );\n        }\n        return;\n      }\n      delete modelDefinition[key];\n      rebindStore(key);\n    },\n  });\n}\n","import createReducer from './create-reducer';\nimport extractDataFromModel from './extract-data-from-model';\n\nexport default function createStoreInternals({\n  disableImmer,\n  initialState,\n  injections,\n  model,\n  reducerEnhancer,\n  references,\n}) {\n  const {\n    _actionCreatorDict,\n    _actionCreators,\n    _actionReducersDict,\n    _computedState,\n    _computedProperties,\n    _customReducers,\n    _defaultState,\n    _effects,\n    _listenerActionCreators,\n    _listenerActionMap,\n    _persistenceConfig,\n  } = extractDataFromModel(model, initialState, injections, references);\n\n  const rootReducer = createReducer(\n    disableImmer,\n    _actionReducersDict,\n    _customReducers,\n    _computedProperties,\n  );\n\n  return {\n    _actionCreatorDict,\n    _actionCreators,\n    _computedProperties,\n    _computedState,\n    _defaultState,\n    _effects,\n    _listenerActionCreators,\n    _listenerActionMap,\n    _persistenceConfig,\n    reducer: reducerEnhancer(rootReducer),\n  };\n}\n","import { isPlainObject } from 'is-plain-object';\nimport {\n  actionOnSymbol,\n  actionSymbol,\n  computedSymbol,\n  effectOnSymbol,\n  persistSymbol,\n  reducerSymbol,\n  thunkOnSymbol,\n  thunkSymbol,\n} from './constants';\nimport { get, set } from './lib';\nimport { extractPersistConfig } from './persistence';\nimport { createActionCreator } from './actions';\nimport { createThunkHandler, createThunkActionsCreator } from './thunks';\nimport { bindListenerDefinitions } from './listeners';\nimport { createComputedPropertyBinder } from './computed-properties';\nimport { createEffectHandler, createEffectActionsCreator } from './effects';\n\nexport default function extractDataFromModel(\n  model,\n  initialState,\n  injections,\n  references,\n) {\n  const _defaultState = initialState;\n  const _actionCreatorDict = {};\n  const _actionCreators = {};\n  const _actionReducersDict = {};\n  const actionThunks = {};\n  const _computedProperties = [];\n  const _customReducers = [];\n  const _effects = [];\n  const _listenerActionCreators = {};\n  const _listenerActionMap = {};\n  const listenerDefinitions = [];\n  let _persistenceConfig = [];\n  const _computedState = {\n    isInReducer: false,\n    currentState: _defaultState,\n  };\n\n  const recursiveExtractFromModel = (current, parentPath) =>\n    Object.keys(current).forEach((key) => {\n      const value = current[key];\n      const path = [...parentPath, key];\n      const meta = {\n        parent: parentPath,\n        path,\n        key,\n      };\n      const handleValueAsState = () => {\n        const initialParentRef = get(parentPath, initialState);\n        if (initialParentRef && key in initialParentRef) {\n          set(path, _defaultState, initialParentRef[key]);\n        } else {\n          set(path, _defaultState, value);\n        }\n      };\n\n      if (key === persistSymbol) {\n        _persistenceConfig.push(extractPersistConfig(parentPath, value));\n        return;\n      }\n\n      if (value != null && typeof value === 'object') {\n        if (value[actionSymbol] || value[actionOnSymbol]) {\n          const definition = { ...value };\n\n          // Determine the category of the action\n          const category = definition[actionSymbol] ? '@action' : '@actionOn';\n\n          // Establish the meta data describing the action\n          definition.meta = {\n            actionName: meta.key,\n            category,\n            type: `${category}.${meta.path.join('.')}`,\n            parent: meta.parent,\n            path: meta.path,\n          };\n\n          // Create the \"action creator\" function\n          definition.actionCreator = createActionCreator(\n            definition,\n            references,\n          );\n\n          // Create a bidirectional relationship of the definition/actionCreator\n          definition.actionCreator.definition = definition;\n\n          // Create a bidirectional relationship of the definition/reducer\n          definition.fn.definition = definition;\n\n          // Add the action creator to lookup map\n          _actionCreatorDict[definition.meta.type] = definition.actionCreator;\n\n          // Add the reducer to lookup map\n          _actionReducersDict[definition.meta.type] = definition.fn;\n\n          // We don't want to expose the internal action to consumers\n          if (meta.key !== 'ePRS') {\n            // Set the action creator in the \"actions\" object tree for\n            // either the listeners object tree, or the standard actions/thunks\n            // object tree\n            if (definition[actionOnSymbol]) {\n              listenerDefinitions.push(definition);\n              set(path, _listenerActionCreators, definition.actionCreator);\n            } else {\n              set(path, _actionCreators, definition.actionCreator);\n            }\n          }\n        } else if (value[thunkSymbol] || value[thunkOnSymbol]) {\n          const definition = { ...value };\n\n          // Determine the category of the thunk\n          const category = definition[thunkSymbol] ? '@thunk' : '@thunkOn';\n\n          // Establish the meta data describing the thunk\n          const type = `${category}.${meta.path.join('.')}`;\n          definition.meta = {\n            actionName: meta.key,\n            parent: meta.parent,\n            path: meta.path,\n            type,\n            startType: `${type}(start)`,\n            successType: `${type}(success)`,\n            failType: `${type}(fail)`,\n          };\n\n          // Create the function that will handle, i.e. be executed, when\n          // the thunk action is created/dispatched\n          definition.thunkHandler = createThunkHandler(\n            definition,\n            references,\n            injections,\n            _actionCreators,\n          );\n\n          // Register the thunk handler\n          set(path, actionThunks, definition.thunkHandler);\n\n          // Create the \"action creator\" function\n          definition.actionCreator = createThunkActionsCreator(\n            definition,\n            references,\n          );\n\n          // Create a bidirectional relationship of the definition/actionCreator\n          definition.actionCreator.definition = definition;\n\n          // Register the action creator within the lookup map\n          _actionCreatorDict[definition.meta.type] = definition.actionCreator;\n\n          // Set the action creator in the \"actions\" object tree for\n          // either the listeners object tree, or the standard actions/thunks\n          // object tree\n          if (definition[thunkOnSymbol]) {\n            listenerDefinitions.push(definition);\n            set(path, _listenerActionCreators, definition.actionCreator);\n          } else {\n            set(path, _actionCreators, definition.actionCreator);\n          }\n        } else if (value[computedSymbol]) {\n          const parent = get(parentPath, _defaultState);\n          const bindComputedProperty = createComputedPropertyBinder(\n            parentPath,\n            key,\n            value,\n            _computedState,\n            references,\n          );\n          bindComputedProperty(parent, _defaultState);\n          _computedProperties.push({ key, parentPath, bindComputedProperty });\n        } else if (value[reducerSymbol]) {\n          _customReducers.push({ key, parentPath, reducer: value.fn });\n        } else if (value[effectOnSymbol]) {\n          const definition = { ...value };\n\n          // Establish the meta data describing the effect\n          const type = `@effectOn.${meta.path.join('.')}`;\n          definition.meta = {\n            type,\n            actionName: meta.key,\n            parent: meta.parent,\n            path: meta.path,\n            startType: `${type}(start)`,\n            successType: `${type}(success)`,\n            failType: `${type}(fail)`,\n          };\n\n          const effectHandler = createEffectHandler(\n            definition,\n            references,\n            injections,\n            _actionCreators,\n          );\n\n          const actionCreator = createEffectActionsCreator(\n            definition,\n            references,\n            effectHandler,\n          );\n\n          definition.actionCreator = actionCreator;\n\n          _effects.push(definition);\n        } else if (isPlainObject(value)) {\n          const existing = get(path, _defaultState);\n          if (existing == null) {\n            set(path, _defaultState, {});\n          }\n          recursiveExtractFromModel(value, path);\n        } else {\n          handleValueAsState();\n        }\n      } else {\n        handleValueAsState();\n      }\n    });\n\n  _persistenceConfig = _persistenceConfig.sort((a, b) => {\n    const aPath = a.path.join('.');\n    const bPath = b.path.join('.');\n    if (aPath < bPath) {\n      return -1;\n    }\n    if (aPath > bPath) {\n      return 1;\n    }\n    return 0;\n  });\n\n  recursiveExtractFromModel(model, []);\n\n  bindListenerDefinitions(\n    listenerDefinitions,\n    _actionCreators,\n    _actionCreatorDict,\n    _listenerActionMap,\n  );\n\n  return {\n    _actionCreatorDict,\n    _actionCreators,\n    _actionReducersDict,\n    _computedProperties,\n    _customReducers,\n    _computedState,\n    _defaultState,\n    _effects,\n    _listenerActionCreators,\n    _listenerActionMap,\n    _persistenceConfig,\n  };\n}\n","export const actionSymbol = '$ep_a';\nexport const actionOnSymbol = '$ep_aO';\nexport const computedSymbol = '$ep_c';\nexport const effectOnSymbol = '$ep_e';\nexport const persistSymbol = '$ep_p';\nexport const reducerSymbol = '$ep_r';\nexport const thunkOnSymbol = '$ep_tO';\nexport const thunkSymbol = '$ep_t';\n","import { actionOnSymbol } from './constants';\n\nexport function createActionCreator(definition, references) {\n  const actionCreator = (payload) => {\n    const action = {\n      type: definition.meta.type,\n      payload,\n    };\n    if (definition[actionOnSymbol] && definition.meta.resolvedTargets) {\n      payload.resolvedTargets = [...definition.meta.resolvedTargets];\n    }\n    return references.dispatch(action);\n  };\n\n  // We bind the types to the creator for easy reference by consumers\n  actionCreator.type = definition.meta.type;\n\n  return actionCreator;\n}\n","import React from 'react';\nimport StoreContext from './context';\n\nexport default function StoreProvider({ children, store }) {\n  return (\n    <StoreContext.Provider value={store}>{children}</StoreContext.Provider>\n  );\n}\n","/* eslint-disable react/prop-types */\n\nimport React, { createContext, useContext } from 'react';\nimport { useMemoOne } from 'use-memo-one';\nimport {\n  createStoreActionsHook,\n  createStoreDispatchHook,\n  createStoreStateHook,\n  createStoreRehydratedHook,\n} from './hooks';\nimport createStore from './create-store';\n\nexport default function createContextStore(model, config = {}) {\n  // We create a mutable injections reference to allow updating it\n  const { injections: mutableInjections = {} } = config;\n\n  const StoreContext = createContext();\n\n  function Provider({ children, runtimeModel, injections }) {\n    // If the user provided injections we need to ensure our mutable ref\n    // is up to date. We could consider doing a shallow compare here?\n    if (injections != null) {\n      const nextInjections =\n        typeof injections === 'function'\n          ? injections(mutableInjections)\n          : injections;\n      const nextKeys = Object.keys(nextInjections);\n      const removeKeys = Object.keys(mutableInjections).filter(\n        (k) => !nextKeys.includes(k),\n      );\n      removeKeys.forEach((k) => {\n        delete mutableInjections[k];\n      });\n      Object.assign(mutableInjections, nextInjections);\n    }\n\n    const store = useMemoOne(\n      () =>\n        createStore(typeof model === 'function' ? model(runtimeModel) : model, {\n          ...config,\n          originalInjections: mutableInjections,\n        }),\n      [],\n    );\n    return (\n      <StoreContext.Provider value={store}>{children}</StoreContext.Provider>\n    );\n  }\n\n  function useStore() {\n    return useContext(StoreContext);\n  }\n\n  return {\n    Provider,\n    useStore,\n    useStoreState: createStoreStateHook(StoreContext),\n    useStoreActions: createStoreActionsHook(StoreContext),\n    useStoreDispatch: createStoreDispatchHook(StoreContext),\n    useStoreRehydrated: createStoreRehydratedHook(StoreContext),\n  };\n}\n","/**\n * This file has been copied from redux-persist.\n * The intention being to support as much of the redux-persist API as possible.\n */\n\nexport default function createTransform(inbound, outbound, config = {}) {\n  const whitelist = config.whitelist || null;\n  const blacklist = config.blacklist || null;\n\n  function whitelistBlacklistCheck(key) {\n    if (whitelist && whitelist.indexOf(key) === -1) return true;\n    if (blacklist && blacklist.indexOf(key) !== -1) return true;\n    return false;\n  }\n\n  return {\n    in: (data, key, fullState) =>\n      !whitelistBlacklistCheck(key) && inbound\n        ? inbound(data, key, fullState)\n        : data,\n    out: (data, key, fullState) =>\n      !whitelistBlacklistCheck(key) && outbound\n        ? outbound(data, key, fullState)\n        : data,\n  };\n}\n","import { useEffect, useRef, useState } from 'react';\nimport { useMemoOne } from 'use-memo-one';\nimport createStore from './create-store';\n\nexport default function useLocalStore(\n  modelCreator,\n  dependencies = [],\n  configCreator,\n) {\n  const storeRef = useRef();\n\n  const configRef = useRef();\n\n  const store = useMemoOne(() => {\n    const previousState =\n      storeRef.current != null ? storeRef.current.getState() : undefined;\n    const config =\n      configCreator != null\n        ? configCreator(previousState, configRef.current)\n        : undefined;\n    const _store = createStore(modelCreator(previousState), config);\n    configRef.current = config;\n    storeRef.current = _store;\n    return _store;\n  }, dependencies);\n\n  const [currentState, setCurrentState] = useState(() => store.getState());\n\n  useEffect(() => {\n    return store.subscribe(() => {\n      const nextState = store.getState();\n      if (currentState !== nextState) {\n        setCurrentState(nextState);\n      }\n    });\n  }, [store]);\n\n  return [currentState, store.getActions(), store];\n}\n"]},"metadata":{},"sourceType":"script"}